% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/logRankTest.R
\name{designSafeLogrank}
\alias{designSafeLogrank}
\title{Designs a Safe Logrank Test}
\usage{
designSafeLogrank(
  hrMin = NULL,
  beta = NULL,
  nEvents = NULL,
  h0 = 1,
  alternative = c("two.sided", "greater", "less"),
  alpha = 0.05,
  ratio = 1,
  exact = TRUE,
  tol = 1e-05,
  m0 = 50000L,
  m1 = 50000L,
  nSim = 1000L,
  nBoot = 10000L,
  ciValue = 0.95,
  parameter = NULL,
  groupSizePerTimeFunction = returnOne,
  pb = TRUE,
  ...
)
}
\arguments{
\item{hrMin}{numeric that defines the minimal relevant hazard ratio, the smallest hazard ratio that we want to
detect.}

\item{beta}{numeric in (0, 1) that specifies the tolerable type II error control necessary to calculate both "n"
and "phiS". Note that 1-beta defines the power.}

\item{nEvents}{numeric > 0, targetted number of events.}

\item{h0}{numeric > 0, represents the null hypothesis, default h0=1.}

\item{alternative}{The null hypothesis of equality of the survival distribution of y in the groups defined by x is
tested. When alternative is "two.sided" the null hypothesis theta = h0, where theta = lambda2/lambda1 is the
hazard ratio, and compared to theta != h0. If alternative = "less", the null hypothesis is compared to
theta <= h0. For h0=1 the alternative specifies that survival in population 1 is higher than in population 2.
When alternative = "greater", the null hypothesis is compared to the alternative theta >= h0. For h0=1 the
alternative specifies that survival in population 2 is higher than in population 1.}

\item{alpha}{numeric in (0, 1) that specifies the tolerable type I error control --independent on n-- that the
designed test has to adhere to. Note that it also defines the rejection rule e10 > 1/alpha.}

\item{ratio}{numeric > 0 representing the randomisation ratio of condition 2 (Treatment) over condition 1 (Placebo),
thus, m1/m0. Note that m1 and m0 are not used to specify ratio. Ratio is only used when \code{zApprox=TRUE}, which
ignores m1 and m0.}

\item{exact}{a logical indicating whether the design should be based on the exact safe logrank test based on the
hypergeometric likelihood. Default is \code{TRUE}, if \code{FALSE} then thedesign is based on a  safe z-test.}

\item{tol}{a number that defines the stepsizes between the lowParam and highParam.}

\item{m0}{Number of subjects in the control group 0/1 at the beginning of the trial, i.e., nPlan[1].}

\item{m1}{Number of subjects in the treatment group 1/2 at the beginning of the trial, i.e., nPlan[2].}

\item{nSim}{integer > 0, the number of simulations needed to compute power or the number of events for the exact
safe logrank test under continuous monitoring}

\item{nBoot}{integer > 0 representing the number of bootstrap samples to assess the accuracy of the approximation of
power or nEvents for the exact safe logrank test under continuous monitoring}

\item{ciValue}{numeric is the ciValue-level of the confidence sequence. Default ciValue=0.95}

\item{parameter}{Numeric > 0, represents the safe tests defining thetaS. Default NULL so it's decided by the
algorithm, typically, this equals hrMin, which corresponds to the GROW choice.}

\item{groupSizePerTimeFunction}{A function without parameters and integer output. This function provides the number
of events at each time step. For instance, if \code{rpois(1, 7)} leads to a random number of events at each time
step.}

\item{pb}{logical, if \code{TRUE}, then show progress bar.}

\item{...}{further arguments to be passed to or from methods.}
}
\value{
Returns a safeDesign object that includes:

\describe{
  \item{nEvents}{the anticipated number of events, either (1) specified by the user, or
  (2) computed based on beta and thetaMin.}
  \item{parameter}{the parameter that defines the safe test. Here log(thetaS).}
  \item{esMin}{the minimally clinically relevant hazard ratio specified by the user.}
  \item{alpha}{the tolerable type I error provided by the user.}
  \item{beta}{the tolerable type II error provided by the user.}
  \item{alternative}{any of "two.sided", "greater", "less" provided by the user.}
  \item{testType}{"logrank".}
  \item{ratio}{default is 1. It defines the ratio between the planned randomisation of
  condition 2 over condition 1.}
  \item{pilot}{\code{FALSE} to indicate that the design is not a pilot study.}
  \item{call}{the expression with which this function is called.}
}
}
\description{
A designed experiment requires (1) an anticipated number of events nEvents, or even better nPlan, the number of
recruited participants of the study, and (2) the parameter of the safe test, i.e., log(thetaS). If nEvents is
provided, then only the safe test defining parameter log(thetaS) needs to determined. That resulting log(thetaS)
leads to an (approximately) most powerful safe test. Typically, nEvents is unknown and the user has to specify
(i) a tolerable type II error beta, and (b) a clinically relevant minimal hazard ratio hrMin. The procedure finds
the smallest nEvents for which hrMin is found with power of at least 1 - beta. The computations exploit the
asymptotic normal chracterisation of the sampling distribution of the logrank test derived by Schoenfeld (1981).
}
\examples{
designSafeLogrank(hrMin=0.7)
designSafeLogrank(hrMin=0.7, zApprox=TRUE)
designSafeLogrank(hrMin=0.7, beta=0.3, nSim=10)
designSafeLogrank(hrMin=0.7, nEvents=190, nSim=10)
}
