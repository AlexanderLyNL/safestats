% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/helpers.R
\name{selectivelyContinueTTestCombineData}
\alias{selectivelyContinueTTestCombineData}
\title{Selectively continue experiments that did not lead to a null rejection for a (safe) t-test}
\usage{
selectivelyContinueTTestCombineData(
  oldValues,
  valuesType = c("sValues", "pValues"),
  designObj = NULL,
  alternative = c("two.sided", "greater", "less"),
  oldData,
  deltaTrue,
  alpha = NULL,
  n1Extra = NULL,
  n2Extra = NULL,
  seed = NULL,
  paired = FALSE,
  muGlobal = 0,
  sigmaTrue = 1,
  moreMainText = ""
)
}
\arguments{
\item{oldValues}{vector of "sValues" or "pValues"}

\item{valuesType}{character either "sValues" or "pValues"}

\item{designObj}{a safeTDesign object, or NULL if valuesType=="pValues"}

\item{alternative}{a character string specifying the alternative hypothesis must be one of "two.sided" (default),
"greater" or "less"}

\item{oldData}{a list of matrices with names "dataGroup1" and "dataGroup2"}

\item{deltaTrue}{numeric, the value of the true effect size (test-relevant parameter)}

\item{alpha}{the tolerable type I error to be conserved. Also defines the decision rule s > 1/alpha, and for
frequentist tests the decision rule is p < alpha.}

\item{n1Extra}{integer, that defines the additional number of samples of the first group. If NULL and
valuesType=="sValues", then n1Extra <- designObj$n1Plan
use designSafeT to find this)}

\item{n2Extra}{optional integer, that defines the additional number of samples of the second group. If NULL, and
valuesType=="sValues", then n2Extra <- designObj$n2Plan}

\item{seed}{To set the seed for the simulated data}

\item{paired}{logical, true if the simulated data are paired.}

\item{muGlobal}{numeric, the true global mean of a paired or two-sample t-test. Its value shouldn't matter for the
test. This parameter treated is treated as a nuisance.}

\item{sigmaTrue}{numeric > 0,the true standard deviation of the data. Its value shouldn't matter for the test.
This parameter treated is treated as a nuisance.}

\item{moreMainText}{character, additional remarks in the title of the histogram}
}
\value{
a list that includes the continued s or p-values based on the combined data, and a list of the combined
data
}
\description{
Selectively continue experiments that did not lead to a null rejection for a (safe) t-test
}
\examples{
alpha <- 0.05
mIter <- 1000L

designObj <- designSafeT(deltaMin=1, alpha=alpha)
oldData <- generateTTestData(n1Plan=designObj$n1Plan, deltaTrue=0, nsim=mIter, seed=1)

sValues <- vector("numeric", length=mIter)

for (i in seq_along(sValues)) {
  sValues[i] <- safeTTest(x=oldData$dataGroup1[i, ], designObj=designObj)$sValue
}
# First run: 7 false null rejections
sum(sValues > 1/alpha)

continuedSafe <- selectivelyContinueTTestCombineData(
  oldValues=sValues, designObj=designObj, oldData=oldData,
  deltaTrue=0, seed=2)

# Second run: 8 false null rejections
sum(continuedSafe$newValues > 1/alpha)

for (i in 1:3) {
  sValues <- continuedSafe$newValues
  oldData <- continuedSafe$combinedData
  continuedSafe <- selectivelyContinueTTestCombineData(
   oldValues=sValues, designObj=designObj, oldData=oldData,
   deltaTrue=0, seed=i+2)
  print(paste("Iteration", i+2))
  print("Number of false null rejections")
  print(sum(continuedSafe$newValues > 1/alpha))
}
}
